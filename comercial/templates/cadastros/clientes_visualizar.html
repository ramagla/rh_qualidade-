{% extends 'base.html' %}

{% block title %}Detalhes do Cliente - {{ cliente.razao_social }}{% endblock %}

{% block content %}
{% include 'partials/global/_estilos_impressao.html' %} {# Se voc√™ tiver estilos espec√≠ficos para impress√£o #}
{% include 'header.html' %} {# Se voc√™ tiver um cabe√ßalho global #}
{% include 'partials/global/_botao_impressao.html' %} {# Bot√£o de impress√£o, se aplic√°vel #}
{% include 'partials/global/_header_titulo.html' with titulo="Detalhes do Cliente" icone="bi bi-building" emoji="üè¢" %}

<div class="container pdf-container">
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-primary text-white d-flex align-items-center">
            <h4 class="mb-0 text-white"><i class="bi bi-info-circle-fill me-2"></i> Dados Gerais do Cliente</h4>
            {% if cliente.logotipo %}
                <img src="{{ cliente.logotipo.url }}" alt="Logotipo do Cliente" class="ms-auto" style="max-height: 50px; border-radius: 5px;">
            {% endif %}
        </div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-md-6">
                    <p><strong><i class="bi bi-building me-1"></i> Raz√£o Social:</strong> {{ cliente.razao_social }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-123 me-1"></i> CNPJ:</strong> {{ cliente.cnpj }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-journal-text me-1"></i> I.E.:</strong> {{ cliente.ie|default:"N√£o informado" }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-phone me-1"></i> Telefone:</strong> {{ cliente.telefone }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-envelope me-1"></i> Email:</strong> {{ cliente.email|default:"N√£o informado" }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-toggle-on me-1"></i> Status:</strong> <span class="badge {% if cliente.status == 'Ativo' %}bg-success{% else %}bg-danger{% endif %}">{{ cliente.status }}</span></p>
                </div>
            </div>

            <h5 class="mt-4"><i class="bi bi-geo-alt-fill me-1"></i> Endere√ßo do Cliente:</h5>
            <p>{{ cliente.endereco }}, {{ cliente.numero }}{% if cliente.complemento %}, {{ cliente.complemento }}{% endif %}</p>
            <p>{{ cliente.bairro }}, {{ cliente.cidade }} - {{ cliente.uf }}, CEP: {{ cliente.cep }}</p>
        </div>
    </div>

    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-secondary text-white">
            <h4 class="mb-0 text-white"><i class="bi bi-folder-fill me-2"></i> Documentos Anexados</h4>
        </div>
        <div class="card-body">
            {% if cliente.documentos.all %}
                <ul class="list-group list-group-flush">
                    {% for documento in cliente.documentos.all %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-file-earmark-text me-2"></i> {{ documento.tipo }}:</span>
                            <a href="{{ documento.arquivo.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                <i class="bi bi-download me-1"></i> Visualizar
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">Nenhum documento anexado para este cliente.</p>
            {% endif %}
        </div>
    </div>

    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-info text-white">
            <h4 class="mb-0 text-white"><i class="bi bi-truck-flatbed me-2"></i> Dados da Transportadora</h4>
        </div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-md-6">
                    <p><strong><i class="bi bi-building me-1"></i> Raz√£o Social:</strong> {{ cliente.transportadora_razao_social }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-123 me-1"></i> CNPJ:</strong> {{ cliente.transportadora_cnpj }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-journal-text me-1"></i> I.E.:</strong> {{ cliente.transportadora_ie|default:"N√£o informado" }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-phone me-1"></i> Telefone:</strong> {{ cliente.transportadora_telefone|default:"N√£o informado" }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-envelope me-1"></i> Email:</strong> {{ cliente.transportadora_email|default:"N√£o informado" }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-box-seam me-1"></i> Coleta:</strong> {% if cliente.coleta %}Sim{% else %}N√£o{% endif %}</p>
                </div>
            </div>

            <h5 class="mt-4"><i class="bi bi-geo-alt-fill me-1"></i> Endere√ßo da Transportadora:</h5>
            <p>{{ cliente.transportadora_endereco }}, {{ cliente.transportadora_numero }}{% if cliente.transportadora_complemento %}, {{ cliente.transportadora_complemento }}{% endif %}</p>
            <p>{{ cliente.transportadora_bairro }}, {{ cliente.transportadora_cidade }} - {{ cliente.transportadora_uf }}, CEP: {{ cliente.transportadora_cep }}</p>
        </div>
    </div>

    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-warning text-dark">
            <h4 class="mb-0 text-dark"><i class="bi bi-gear-fill me-2"></i> Outras Informa√ß√µes</h4>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4">
                    <p><strong><i class="bi bi-calculator me-1"></i> ICMS:</strong> {{ cliente.icms|default:"0.00"|stringformat:"%.2f" }}%</p>
                </div>
                <div class="col-md-4">
                    <p><strong><i class="bi bi-calculator me-1"></i> IPI:</strong> {{ cliente.ipi|default:"0.00"|stringformat:"%.2f" }}%</p>
                </div>
                <div class="col-md-4">
                    <p><strong><i class="bi bi-hash me-1"></i> CFOP:</strong> {{ cliente.cfop }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-credit-card-2-front me-1"></i> Condi√ß√£o de Pagamento:</strong> {{ cliente.cond_pagamento }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="bi bi-qr-code me-1"></i> C√≥digo BM:</strong> {{ cliente.cod_bm }}</p>
                </div>
                <div class="col-12">
                    <p><strong><i class="bi bi-chat-dots-fill me-1"></i> Observa√ß√£o:</strong> {{ cliente.observacao|default:"Nenhuma observa√ß√£o." }}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-5">
        <a href="{% url 'editar_cliente' cliente.pk %}" class="btn btn-warning me-2">
            <i class="bi bi-pencil-square me-1"></i> Editar Cliente
        </a>
        <a href="{% url 'lista_clientes' %}" class="btn btn-secondary">
            <i class="bi bi-arrow-left-circle me-1"></i> Voltar para Lista
        </a>
    </div>

</div>

{% include "partials/global/_formulario_rodape.html" with numero_formulario="CLI-VIEW Rev.01" %} {# Rodap√© customiz√°vel #}
{% endblock %}