{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block title %}Avalia√ß√£o de Job Rotation - {{ evaluation.funcionario.nome }}{% endblock %}

{% block content %}
{% include 'partials/global/_estilos_impressao.html' %}
{% include 'header.html' %}
{% include 'partials/global/_botao_impressao.html' %}
{% include 'partials/global/_header_titulo.html' with titulo="Programa de Avalia√ß√£o - Job Rotation" icone="bi bi-arrow-repeat" emoji="üõã" %}

<div class="container pdf-container">
  <!-- Dados do Colaborador e Job Rotation -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped mb-4 rounded-2 border-light">
      <tr>
        <th><i class="bi bi-person-circle me-1"></i> Colaborador</th>
        <td>{{ evaluation.funcionario.nome }}</td>
        <th><i class="bi bi-geo-alt me-1"></i> √Årea Atual</th>
        <td>{{ evaluation.funcionario.local_trabalho }}</td>
      </tr>
      <tr>
        <th><i class="bi bi-award me-1"></i> Cargo Atual</th>
        <td>{{ evaluation.funcionario.cargo_atual.nome }}</td>
        <th><i class="bi bi-person-vcard me-1"></i> Gestor Respons√°vel</th>
        <td>{{ evaluation.gestor_responsavel.nome }}</td>
      </tr>
      <tr>
        <th><i class="bi bi-arrow-right-circle me-1"></i> Nova Fun√ß√£o</th>
        <td>{{ evaluation.nova_funcao.nome }}</td>
        <th><i class="bi bi-calendar-event me-1"></i> Per√≠odo</th>
        <td>{{ evaluation.data_inicio|date:"d/m/Y" }} ‚Äì {{ evaluation.termino_previsto|date:"d/m/Y" }}</td>
      </tr>
    </table>
  </div>

  <!-- Compet√™ncias e Hist√≥rico -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped mb-4 rounded-2 border-light">
      <tr>
<th colspan="2" class="text-center" style="background-color: #fcf4d9;">
    <i class="bi bi-lightbulb me-1"></i> Compet√™ncias Atuais
  </th>        <td>{{ evaluation.competencias }}</td>
      </tr>
      <tr>
        <th><i class="bi bi-mortarboard me-1"></i> Escolaridade</th>
        <td>{{ evaluation.escolaridade }}</td>
      </tr>
      <tr>
        <th><i class="bi bi-graph-up me-1"></i> √öltima Avalia√ß√£o</th>
        <td>{{ evaluation.data_ultima_avaliacao|date:"d/m/Y" }} ({{ evaluation.status_ultima_avaliacao }})</td>
      </tr>
      <tr>
        <th><i class="bi bi-person-workspace me-1"></i> Novas Compet√™ncias</th>
        <td>{{ descricao_cargo }}</td>
      </tr>
      <tr>
        <th><i class="bi bi-calendar-range me-1"></i> √öltima Atualiza√ß√£o da Fun√ß√£o</th>
        <td>{{ ultima_revisao.data_revisao|date:"d/m/Y" }}</td>
      </tr>
    </table>
  </div>

  <!-- Treinamentos -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped mb-4 rounded-2 border-light">
      <thead class="text-center">
        <tr>
          <th><i class="bi bi-bookmark-check me-1"></i> Realizados</th>
          <th><i class="bi bi-journal-plus me-1"></i> Requeridos</th>
          <th><i class="bi bi-journal-text me-1"></i> Propostos</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            {% if evaluation.funcionario.treinamentos.exists %}
              <ul>
              {% for treinamento in evaluation.funcionario.treinamentos.all|dictsortreversed:"data_fim"|slice:":10" %}
                <li><strong>{{ treinamento.nome_curso }}</strong> - {{ treinamento.categoria|title }} ({{ treinamento.data_inicio|date:"d/m/Y" }} - {{ treinamento.data_fim|date:"d/m/Y" }})</li>
              {% endfor %}
              </ul>
            {% else %}
              Nenhum treinamento realizado.
            {% endif %}
          </td>
          <td>{{ evaluation.treinamentos_requeridos|default:"Nenhum."|safe }}</td>
          <td>{{ evaluation.treinamentos_propostos|default:"Nenhum."|safe }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Avalia√ß√µes -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped mb-4 rounded-2 border-light">
      <thead class="text-center">
        <tr>
          <th><i class="bi bi-person-badge-fill me-1"></i> Avalia√ß√£o do Gestor</th>
          <th><i class="bi bi-person-lines-fill me-1"></i> Avalia√ß√£o do Colaborador</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ evaluation.avaliacao_gestor|default:"Nenhuma."|safe }}</td>
          <td>{{ evaluation.avaliacao_funcionario|default:"Nenhuma."|safe }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- RH e Vaga -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped mb-4 rounded-2 border-light">
      <tr>
        <th><i class="bi bi-building-check me-1"></i> Avalia√ß√£o do RH</th>
        <td>{{ evaluation.get_avaliacao_rh_display|default:"Nenhuma avalia√ß√£o do RH." }}</td>
      </tr>
      <tr>
        <th><i class="bi bi-people-fill me-1"></i> Disponibilidade de Vaga</th>
        <td>{% if evaluation.disponibilidade_vaga %}Sim{% else %}N√£o{% endif %}</td>
      </tr>
    </table>
  </div>

  <!-- Assinaturas -->
  <div class="mt-5">
    <table class="custom-table" style="width: 100%;">
      <tr>
        <td class="text-center" style="width: 33%;">
          <p style="margin-bottom: 40px;"><strong>Assinatura do Colaborador</strong></p>
          <div style="width: 80%; margin: 0 auto; border-top: 1px dashed #333; margin-top: 40px;"></div>
          <p class="mt-2">{{ evaluation.funcionario.nome }}</p>
        </td>
        <td class="text-center" style="width: 33%;">
          <p style="margin-bottom: 40px;"><strong>Assinatura do Gestor</strong></p>
          <div style="width: 80%; margin: 0 auto; border-top: 1px dashed #333; margin-top: 40px;"></div>
          <p class="mt-2">{{ evaluation.gestor_responsavel.nome }}</p>
        </td>
        <td class="text-center" style="width: 33%;">
          <p style="margin-bottom: 40px;"><strong>Assinatura do Respons√°vel R.H.</strong></p>
          <div style="width: 80%; margin: 0 auto; border-top: 1px dashed #333; margin-top: 40px;"></div>
          <p class="mt-2">Respons√°vel R.H.</p>
        </td>
      </tr>
    </table>
  </div>

{% include 'partials/global/_formulario_rodape.html' with numero_formulario="F197 Rev.01" %}
{% endblock %}
