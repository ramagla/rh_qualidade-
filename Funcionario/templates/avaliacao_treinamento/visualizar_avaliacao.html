{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}
{% load tz %}

{% block title %}VisualizaÃ§Ã£o da AvaliaÃ§Ã£o de Treinamentos{% endblock %}

{% block content %}
  {% include "partials/global/_estilos_impressao.html" %}
  {% include "partials/global/_botao_impressao.html" %}
  {% include "header.html" %}

  <div id="relatorio-area">
    <div class="pdf-container">
      <!-- CabeÃ§alho -->
      <div class="pdf-header text-center">
        <h1>ðŸ“‹ AvaliaÃ§Ã£o de Treinamento</h1>
        <p>VisualizaÃ§Ã£o detalhada do resultado da avaliaÃ§Ã£o</p>
      </div>

      <!-- ConteÃºdo -->
      <div class="pdf-content">
        <div class="table-responsive">
          <table class="table table-bordered info-table align-middle">
            <tr>
              <th>Data da AvaliaÃ§Ã£o</th>
              <td>{{ avaliacao.data_avaliacao|date:"d/m/Y" }}</td>
            </tr>
            <tr>
              <th>PerÃ­odo (dias)</th>
              <td>{{ avaliacao.periodo_avaliacao }}</td>
            </tr>
            <tr>
              <th>Colaborador Avaliado</th>
              <td>{{ avaliacao.funcionario.nome }}</td>
            </tr>
            <tr>
              <th>Treinamento/Curso</th>
              <td>
                {% if avaliacao.treinamento %}
                  {{ avaliacao.treinamento.nome_curso }}
                {% else %}
                  <span class="text-muted">Treinamento nÃ£o associado</span>
                {% endif %}
              </td>
            </tr>

            {% if avaliacao.responsavel_1 %}
              <tr><th>1Âº ResponsÃ¡vel</th><td>{{ avaliacao.responsavel_1.nome }} â€“ {{ avaliacao.responsavel_1.cargo_atual.nome }}</td></tr>
            {% endif %}
            {% if avaliacao.responsavel_2 %}
              <tr><th>2Âº ResponsÃ¡vel</th><td>{{ avaliacao.responsavel_2.nome }} â€“ {{ avaliacao.responsavel_2.cargo_atual.nome }}</td></tr>
            {% endif %}
            {% if avaliacao.responsavel_3 %}
              <tr><th>3Âº ResponsÃ¡vel</th><td>{{ avaliacao.responsavel_3.nome }} â€“ {{ avaliacao.responsavel_3.cargo_atual.nome }}</td></tr>
            {% endif %}

            <tr>
              <th>I - Grau de conhecimento atual</th>
              <td>{{ grau_conhecimento }}</td>
            </tr>
            <tr>
              <th>II - AplicaÃ§Ã£o dos conceitos</th>
              <td>{{ aplicacao_conceitos }}</td>
            </tr>
            <tr>
              <th>III - Resultados obtidos</th>
              <td>{{ resultados_obtidos }}</td>
            </tr>
            <tr>
              <th>DescriÃ§Ã£o de Melhorias</th>
              <td>
                <div style="white-space: pre-line;">{{ melhorias|safe }}</div>
              </td>
            </tr>

            <tr>
              <th class="text-center">AvaliaÃ§Ã£o Geral</th>
              <td class="text-center">
                <strong class="fs-5">
                  {{ avaliacao_geral }}
                  {% if avaliacao_geral == "Pouco Eficaz" %}
                    ðŸ˜”
                  {% elif avaliacao_geral == "Eficaz" %}
                    ðŸ™‚
                  {% elif avaliacao_geral == "Muito Eficaz" %}
                    ðŸ˜ƒ
                  {% endif %}
                </strong>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <!-- RodapÃ© -->
      <div class="text-center text-muted small mt-4">
        <i class="bi bi-clock me-1"></i>
        RelatÃ³rio gerado em {{ now|date:"d/m/Y H:i" }}
        <p class="mb-0 fst-italic">
          {% include "partials/global/_rodape_institucional.html" %}
        </p>
      </div>
    </div>

    <!-- BotÃ£o Voltar -->
    <div class="text-center mt-4 d-print-none">
      <a href="{% url 'lista_avaliacoes' %}" class="btn btn-secondary">
        <i class="bi bi-arrow-left-circle"></i> Voltar
      </a>
    </div>
  </div>
{% endblock %}
