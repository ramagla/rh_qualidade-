{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}
{% load tz %}

{% block title %}Visualiza√ß√£o do Colaborador{% endblock %}

{% block content %}
  {% include "partials/global/_estilos_impressao.html" %}
  {% include "partials/global/_botao_impressao.html" %}
{% include 'header.html' %}

  <div id="relatorio-area">
    <div class="pdf-container">
      <!-- Cabe√ßalho -->
      <div class="pdf-header text-center">
        <h1>üë§ Colaborador</h1>
        <p>Visualiza√ß√£o detalhada do colaborador</p>
      </div>

      <!-- Conte√∫do -->
      <div class="pdf-content">
        <div class="table-responsive">
          <table class="table table-bordered info-table">
            <!-- Informa√ß√µes Pessoais -->
            <tr>
              <th class="align-middle">Nome</th>
              <td class="align-middle">{{ funcionario.nome }}</td>
            </tr>
            <tr>
              <th class="align-middle">N√∫mero de Registro</th>
              <td class="align-middle">{{ funcionario.numero_registro }}</td>
            </tr>
            <tr>
              <th class="align-middle">Data de Admiss√£o</th>
              <td class="align-middle">{{ funcionario.data_admissao|date:"d/m/Y" }}</td>
            </tr>
            <tr>
              <th class="align-middle">Status</th>
              <td class="align-middle">{{ funcionario.status }}</td>
            </tr>

            <!-- Dados Profissionais -->
            <tr>
              <th class="align-middle">Cargo Inicial</th>
              <td class="align-middle">{{ funcionario.cargo_inicial.nome }}</td>
            </tr>
            <tr>
              <th class="align-middle">Cargo Atual</th>
              <td class="align-middle">{{ funcionario.cargo_atual.nome }}</td>
            </tr>
            <tr>
              <th class="align-middle">Local de Trabalho</th>
              <td class="align-middle">{{ funcionario.local_trabalho }}</td>
            </tr>
            <tr>
              <th class="align-middle">Respons√°vel</th>
              <td class="align-middle">{{ funcionario.responsavel }}</td>
            </tr>

            <!-- Documentos -->
            <tr>
              <th class="align-middle">Curr√≠culo</th>
              <td class="align-middle">
                {% if funcionario.curriculo %}
                  <a href="{{ funcionario.curriculo.url }}" class="btn btn-info btn-sm" download>
                    <i class="bi bi-download"></i> Baixar
                  </a>
                  <span class="small text-muted">({{ funcionario.curriculo.name|basename }})</span>
                {% else %}
                  N√£o dispon√≠vel
                {% endif %}
              </td>
            </tr>
            <tr>
              <th class="align-middle">Certificado Ensino M√©dio</th>
              <td class="align-middle">
                {% if funcionario.formulario_f146 %}
                  <a href="{{ funcionario.formulario_f146.url }}" class="btn btn-info btn-sm" download>
                    <i class="bi bi-download"></i> Baixar
                  </a>
                  <span class="small text-muted">({{ funcionario.formulario_f146.name|basename }})</span>
                {% else %}
                  N√£o dispon√≠vel
                {% endif %}
              </td>
            </tr>

            <!-- Foto -->
            <tr>
              <th class="align-middle">Foto</th>
              <td class="align-middle text-center">
                {% if funcionario.foto %}
                  <img src="{{ funcionario.foto.url }}"
                       alt="Foto do Colaborador"
                       style="width:100px; height:100px; object-fit:cover; border-radius:50%;">
                {% else %}
                  Sem foto cadastrada
                {% endif %}
              </td>
            </tr>

            <!-- Assinatura Eletr√¥nica -->
            <tr>
              <th class="align-middle">Assinatura Eletr√¥nica</th>
              <td class="align-middle text-center">
                {% if funcionario.assinatura_eletronica %}
                  <img src="{{ funcionario.assinatura_eletronica.url }}"
                       alt="Assinatura Eletr√¥nica"
                       style="width:200px; object-fit:contain;">
                {% else %}
                  Sem assinatura eletr√¥nica cadastrada
                {% endif %}
              </td>
            </tr>
          </table>
        </div>
      </div>

      <!-- Rodap√© -->
      <div class="pdf-footer text-center text-muted small">
        <p class="mb-1">
          <i class="bi bi-clock me-1" aria-hidden="true"></i>
          Relat√≥rio gerado em {{ now|date:"d/m/Y H:i" }}
        </p>
        <p class="mb-0 fst-italic">
          {% include "partials/global/_rodape_institucional.html" %}
        </p>
      </div>
    </div>
  </div>
{% endblock %}
